_$ES.Define("flash.net::SharedObject",["flash.events::EventDispatcher","TypeError","flash.net::SharedObjectFlushStatus","flash.net::ObjectEncoding","Object"],function(n){"use strict";var t={},i=n.createScope({},t,"flash.events::EventDispatcher");return t["flash.net::SharedObject"]=function(i){function r(){this._$client=this;i.call(this);n.js.window.addEventListener("beforeunload",this._$flush);this.objectEncoding=t["flash.net::SharedObject"].defaultObjectEncoding}var u=n.createScope({},t,"flash.events::EventDispatcher","TypeError","flash.net::SharedObjectFlushStatus","flash.net::ObjectEncoding","Object");return u._$push(u.Object,u.EventDispatcher),u._$push(r),r._$TypeInfo={so:n,isDynamic:!1,isFinal:!1,isInterface:!1,fullName:"flash.net::SharedObject",theExtends:u.EventDispatcher,theImplements:[]},_$ES.F._extends(r,i),n.defField(r.prototype,"_$keyName"),n.defField(r.prototype,"_$client"),n.defProp(r.prototype,"client",function(){return this._$client},function(n){if(!n)throw new u.TypeError("必须将 client 属性设置为非空对象。");this._$client=n}),n.defField(r.prototype,"_$data"),n.defMethod(r.prototype,"flush",function(n){return n===undefined&&(n=0),n=n|0,this._$$_$flush(),"flushed"}),n.defMethod(r.prototype,"_$flush",function(){try{n.js.window.localStorage.setItem(this._$keyName,n.js.JSON.stringify(this._$data))}catch(t){}}),n.defMethod(r.prototype,"close",function(){this._$$flush()}),n.defMethod(r.prototype,"clear",function(){this._$data={};this._$$flush()}),n.defField(r.prototype,"_$fps"),n.defMethod(r.prototype,"setProperty",function(n,t){n=n==null?null:""+n;t===undefined&&(t=null);this.data[n]=t}),n.defField(r.prototype,"_$objectEncoding",0),n.defProp(r.prototype,"objectEncoding",function(){return this._$objectEncoding},function(n){n=n>>>0;this._$objectEncoding=n}),n.defProp(r.prototype,"data",function(){return this._$data},!1),n.defProp(r.prototype,"fps",!1,function(n){n=+n;this._$fps=n}),n.defProp(r.prototype,"size",function(){return n.js.JSON.stringify(this.data).length*4>>>0},!1),function(){var i=arguments[0]._$clone();n.defFunc(r,"getLocal",function(t,i,u){var f,e,o,h,s;if(t=t==null?null:""+t,i===undefined&&(i=null),i=i==null?null:""+i,u===undefined&&(u=!1),f=null,i||(i=n.castString(n.appInfo.url)),e="_$ES_"+i+"_"+t,o=n.js.window.localStorage,o&&(f=o.getItem(e)),!f){f="{}";try{o.setItem(e,f)}catch(c){}}return h=n.js.JSON.parse(f),s=new r,s._$keyName=e,s._$data=h,s},r);n.defField(r,"_$defaultObjectEncoding",0);n.defProp(r,"defaultObjectEncoding",function(){return t["flash.net::SharedObject"]._$defaultObjectEncoding},function(n){n=n>>>0;t["flash.net::SharedObject"]._$defaultObjectEncoding=n})}(u),function(){this._$defaultObjectEncoding=3}.call(r),r},function(){t["flash.net::SharedObject"]=t["flash.net::SharedObject"](i.EventDispatcher)}.call(t),t});